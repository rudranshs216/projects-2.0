(this["webpackJsonpsnapchat-clone"]=this["webpackJsonpsnapchat-clone"]||[]).push([[0],{79:function(e,c,a){},84:function(e,c,a){},85:function(e,c,a){},93:function(e,c,a){},94:function(e,c,a){},95:function(e,c,a){},96:function(e,c,a){},97:function(e,c,a){},98:function(e,c,a){"use strict";a.r(c);var t=a(2),s=a.n(t),n=a(47),i=a.n(n),r=(a(79),a(14)),o=a(59),l=a(9),j=(a(84),a(19)),u=a(114),d=a(115),b=a(116),m=a(129),p=a(113),h=a(71),f=(a(85),a(40)),O=Object(f.b)({name:"app",initialState:{user:null,selectImage:null},reducers:{login:function(e,c){e.user=c.payload},logout:function(e){e.user=null},selectImage:function(e,c){e.selectImage=c.payload},resetSelectImage:function(e){e.selectImage=null}}}),x=O.actions,v=x.login,g=x.logout,N=x.selectImage,_=(x.resetSelectImage,function(e){return e.app.selectImage}),w=function(e){return e.app.user},I=O.reducer,C=a(38),S=C.a.initializeApp({apiKey:"AIzaSyB1WqHoVgCnqefVXnsqV1Xgu0bIZ22aZPs",authDomain:"snapchat-clone-f1fe4.firebaseapp.com",projectId:"snapchat-clone-f1fe4",storageBucket:"snapchat-clone-f1fe4.appspot.com",messagingSenderId:"645573215946",appId:"1:645573215946:web:37b8099df41e628d8a5633"}).firestore(),R=C.a.auth(),k=C.a.storage(),y=new C.a.auth.GoogleAuthProvider,P=a(3);var U=function(e){var c=e.profilePic,a=e.username,t=e.timestamp,s=e.imageURL,n=e.read,i=e.id,o=Object(r.b)(),j=Object(l.f)();return Object(P.jsxs)("div",{onClick:function(){n||(o(N(s)),S.collection("posts").doc(i).set({read:!0},{merge:!0}),j.push("/chats/view"))},className:"chat",children:[Object(P.jsx)(m.a,{className:"chat_avatar",src:c}),Object(P.jsxs)("div",{className:"chat_info",children:[Object(P.jsx)("h4",{children:a}),Object(P.jsxs)("p",{children:[!n&&"Tap to view -","  ",Object(P.jsx)(h.a,{date:new Date(null===t||void 0===t?void 0:t.toDate()).toUTCString()})]})]}),!n&&Object(P.jsx)(p.a,{className:"chat_icon"})]})},L=(a(93),Object(f.b)({name:"camera",initialState:{cameraImage:null},reducers:{setCameraImage:function(e,c){e.cameraImage=c.payload},resetCameraImage:function(e,c){e.cameraImage=null}}})),z=L.actions,A=z.setCameraImage,B=z.resetCameraImage,V=function(e){return e.camera.cameraImage},E=L.reducer;var F=function(){var e=Object(t.useState)([]),c=Object(j.a)(e,2),a=c[0],s=c[1],n=Object(r.c)(w),i=Object(l.f)(),o=Object(r.b)();return Object(t.useEffect)((function(){S.collection("posts").orderBy("timestamp","desc").onSnapshot((function(e){var c;s(null===(c=e.docs)||void 0===c?void 0:c.map((function(e){return{id:e.id,data:e.data()}})))}))}),[]),Object(P.jsxs)("div",{className:"chats",children:[Object(P.jsxs)("div",{className:"chats_header",children:[Object(P.jsx)(m.a,{src:n.profilePic,onClick:function(){R.signOut()},className:"chats_avatar"}),Object(P.jsxs)("div",{className:"chats_search",children:[Object(P.jsx)(u.a,{className:"chats_icons"}),Object(P.jsx)("input",{type:"text",placeholder:"Friends"})]}),Object(P.jsx)(d.a,{className:"chats_icon"})]}),Object(P.jsx)("div",{className:"chats_post",children:null===a||void 0===a?void 0:a.map((function(e){var c=e.id,a=e.data,t=a.profilePic,s=a.username,n=a.timestamp,i=a.imageURL,r=a.read;return Object(P.jsx)(U,{id:c,username:s,timestamp:n,imageURL:i,profilePic:t,read:r},c)}))}),Object(P.jsx)(b.a,{className:"chats_takePicIcon",onClick:function(){o(B()),i.push("/")},fontSize:"large"})]})},T=a(69);a(94);var D=function(){var e=Object(l.f)(),c=Object(r.c)(_);Object(t.useEffect)((function(){c||a()}),[c]);var a=function(){e.replace("/chats")};return Object(P.jsxs)("div",{onClick:a,className:"chatView",children:[Object(P.jsx)("img",{src:c,alt:""}),Object(P.jsx)("div",{className:"chatView_timer",children:Object(P.jsx)(T.CountdownCircleTimer,{isPlaying:!0,duration:10,strokeWidth:6,size:50,colors:[["#004777",.33],["#F7B801",.33],["#A30000",.33]],children:function(e){var c=e.remainingTime;return 0==c&&a(),c}})})]})},q=a(126);a(95);var W=function(){var e=Object(r.b)();return Object(P.jsx)("div",{className:"login",children:Object(P.jsxs)("div",{className:"login_container",children:[Object(P.jsx)("img",{src:"https://scx2.b-cdn.net/gfx/news/2017/1-snapchat.jpg",alt:""}),Object(P.jsx)(q.a,{onClick:function(){R.signInWithPopup(y).then((function(c){e(v({username:c.user.displayName,profilePic:c.user.photoURL,id:c.user.uid}))})).catch((function(e){alert(e.message)}))},variant:"outlined",children:"Sign In"})]})})},J=a(117),M=a(118),X=a(119),Z=a(120),G=a(121),H=a(122),K=a(123),Q=a(124),Y=a(125),$=(a(96),a(127));var ee=function(){var e=Object(r.c)(w),c=Object(r.b)(),a=Object(l.f)(),s=Object(r.c)(V);return Object(t.useEffect)((function(){s||a.replace("/")}),[s]),Object(P.jsxs)("div",{className:"preview",children:[Object(P.jsx)(J.a,{onClick:function(){c(B())},className:"preview_close"}),Object(P.jsxs)("div",{className:"preview_toolbarR",children:[Object(P.jsx)(M.a,{className:"preview_toolbarR_icon"}),Object(P.jsx)(X.a,{className:"preview_toolbarR_icon"}),Object(P.jsx)(Z.a,{className:"preview_toolbarR_icon"}),Object(P.jsx)(G.a,{className:"preview_toolbarR_icon"}),Object(P.jsx)(H.a,{className:"preview_toolbarR_icon"}),Object(P.jsx)(K.a,{className:"preview_toolbarR_icon"}),Object(P.jsx)(Q.a,{className:"preview_toolbarR_icon"})]}),Object(P.jsx)("div",{children:Object(P.jsx)("img",{src:s,alt:""})}),Object(P.jsxs)("div",{onClick:function(){var c=Object($.a)();k.ref("posts/".concat(c)).putString(s,"data_url").on("state_changed",null,(function(e){console.log(e)}),(function(){k.ref("posts").child(c).getDownloadURL().then((function(c){S.collection("posts").add({imageURL:c,username:e.username,read:!1,profilePic:e.profilePic,timestamp:C.a.firestore.FieldValue.serverTimestamp()}),a.replace("/chats")}))}))},className:"preview_footer",children:[Object(P.jsx)("h2",{children:"Send Now"}),Object(P.jsx)(Y.a,{fontSize:"small",className:"preview_sendIcon"})]})]})},ce=a(70),ae=a.n(ce),te=(a(97),{width:250,height:400,facingMode:"user"});var se=function(){var e=Object(l.f)(),c=Object(r.b)(),a=Object(t.useRef)(null),s=Object(t.useCallback)((function(){var t=a.current.getScreenshot();c(A(t)),e.push("/preview")}),[a]);return Object(P.jsxs)("div",{className:"webcamCapture",children:[Object(P.jsx)(ae.a,{audio:!1,height:te.height,width:te.width,ref:a,mirrored:!0,screenshotFormat:"image/jpeg",videoConstraints:te}),Object(P.jsx)(b.a,{className:"webcamCapture_button",onClick:s,fontSize:"large"})]})};var ne=function(){var e=Object(r.c)(w),c=Object(r.b)();return Object(t.useEffect)((function(){R.onAuthStateChanged((function(e){c(e?v({username:e.displayName,profilePic:e.photoURL,id:e.uid}):g())}))}),[]),Object(P.jsx)("div",{className:"App",children:Object(P.jsx)(o.a,{children:e?Object(P.jsxs)(P.Fragment,{children:[Object(P.jsx)("img",{className:"app_logo",src:"https://scx2.b-cdn.net/gfx/news/2017/1-snapchat.jpg",alt:""}),Object(P.jsx)("div",{className:"app_body",children:Object(P.jsx)("div",{className:"app_bodyBackground",children:Object(P.jsxs)(l.c,{children:[Object(P.jsx)(l.a,{exact:!0,path:"/",children:Object(P.jsx)(se,{})}),Object(P.jsx)(l.a,{exact:!0,path:"/chats",children:Object(P.jsx)(F,{})}),Object(P.jsx)(l.a,{exact:!0,path:"/chats/view",children:Object(P.jsx)(D,{})}),Object(P.jsx)(l.a,{exact:!0,path:"/preview",children:Object(P.jsx)(ee,{})})]})})})]}):Object(P.jsx)(W,{})})})},ie=Object(f.a)({reducer:{app:I,camera:E}});i.a.render(Object(P.jsx)(s.a.StrictMode,{children:Object(P.jsx)(r.a,{store:ie,children:Object(P.jsx)(ne,{})})}),document.getElementById("root"))}},[[98,1,2]]]);
//# sourceMappingURL=main.4f53bf57.chunk.js.map